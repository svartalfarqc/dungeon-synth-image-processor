<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏰 Dungeon Synth Processor 🏰</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>🏰 DUNGEON SYNTH PROCESSOR 🏰</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="fileInput">Upload Image:</label>
                <input type="file" id="fileInput" accept="image/*">
                <div id="uploadStatus" class="status-message"></div>
            </div>
            
            <div class="preset-buttons">
                <h3>Authentic Dungeon Synth Presets</h3>
                <div class="preset-grid">
                    <button onclick="applyPreset('medieval')">📜 Medieval Manuscript</button>
                    <button onclick="applyPreset('threshold')">🔳 Clean Threshold</button>
                    <button onclick="applyPreset('atmospheric')">🌫️ Atmospheric Depths</button>
                    <button onclick="applyPreset('silhouette')">👤 Silhouette</button>
                    <button onclick="applyPreset('ghostly')">👻 Ghostly Apparition</button>
                    <button onclick="applyPreset('cavernDeep')">🕳️ Cavern Deep</button>
                    <button onclick="applyPreset('frozenWastes')">❄️ Frozen Wastes</button>
                    <button onclick="applyPreset('darkRitual')">🔮 Dark Ritual</button>
                    <button onclick="applyPreset('lithographic')" class="new-preset">🖨️ Lithographic Codex</button>
                    <button onclick="applyPreset('sepiaNostalgia')" class="new-preset">📸 Sepia Nostalgia</button>
                    <button onclick="applyPreset('comfyHearth')" class="new-preset">🏠 Comfy Hearth</button>
                    <button onclick="applyPreset('forestMystic')" class="new-preset">🌲 Forest Mystic</button>
                </div>
            </div>
            
            <div class="action-buttons">
                <button onclick="processAllPresets()" id="processAllBtn" disabled>Generate All Variations</button>
                <button onclick="resetToOriginal()" id="resetBtn" disabled>Reset to Original</button>
            </div>
        </div>
        
        <div class="image-grid">
            <div class="image-container original-container">
                <h3>Original Image</h3>
                <div class="image-wrapper">
                    <img id="originalImage" class="preview-image" style="display: none;">
                    <div id="uploadPrompt" class="upload-prompt">
                        <div class="upload-icon">📁</div>
                        <p>Upload an image to begin processing</p>
                        <p class="upload-hint">Supported formats: JPG, PNG, TIFF, BMP, WebP</p>
                    </div>
                </div>
                <div class="image-info" id="imageInfo" style="display: none;"></div>
            </div>
            
            <!-- CUSTOM PROCESSING SECTION WITH SLIDERS AND COLOR TINTING -->
            <div class="image-container custom-container">
                <h3>Custom Processing</h3>
                <div class="image-wrapper">
                    <img id="customImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🎛️</div>
                        <p>Custom preview will appear here</p>
                    </div>
                </div>
                
                <!-- PROCESSING SLIDERS -->
                <div class="custom-controls">
                    <div class="control-group">
                        <label for="contrast">Contrast: <span id="contrastValue">1.5</span></label>
                        <input type="range" id="contrast" min="0.5" max="3" step="0.1" value="1.5">
                    </div>
                    
                    <div class="control-group">
                        <label for="brightness">Brightness: <span id="brightnessValue">0</span></label>
                        <input type="range" id="brightness" min="-100" max="100" step="5" value="0">
                    </div>
                    
                    <div class="control-group">
                        <label for="threshold">Threshold: <span id="thresholdValue">128</span></label>
                        <input type="range" id="threshold" min="0" max="255" step="5" value="128">
                    </div>
                    
                    <div class="control-group">
                        <label for="noise">Grain/Noise: <span id="noiseValue">20</span></label>
                        <input type="range" id="noise" min="0" max="50" step="5" value="20">
                    </div>
                    
                    <div class="control-group">
                        <label for="blur">Atmospheric Blur: <span id="blurValue">0</span></label>
                        <input type="range" id="blur" min="0" max="5" step="0.5" value="0">
                    </div>
                    
                    <!-- COLOR TINTING CONTROL -->
                    <div class="control-group color-tint-group">
                        <label for="colorTint">Color Tinting:</label>
                        <select id="colorTint">
                            <option value="none">No Tinting</option>
                            <option value="sepia">Sepia Warmth</option>
                            <option value="sickly_green">Sickly Green</option>
                            <option value="archaic_grey">Archaic Grey</option>
                            <option value="winter_frost">Winter Frost</option>
                            <option value="comfy_earth">Comfy Earth</option>
                            <option value="blood_ritual">Blood Ritual</option>
                            <option value="parchment_age">Parchment Age</option>
                            <option value="deep_purple">Deep Purple</option>
                        </select>
                        <div class="color-preview" id="colorPreview"></div>
                    </div>
                </div>
                
                <button class="download-btn" onclick="downloadProcessed('custom')" disabled>Download Custom</button>
                <div class="effect-info">Live preview with current settings and optional color tinting</div>
            </div>
            
            <!-- PRESET IMAGES - UPDATED WITH NEW PRESETS -->
            <div class="image-container">
                <h3>Medieval Manuscript</h3>
                <div class="image-wrapper">
                    <img id="medievalImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">📜</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('medieval')" disabled>Download</button>
                <div class="effect-info">Authentic medieval illuminated manuscript aesthetic</div>
            </div>
            
            <div class="image-container">
                <h3>Clean Threshold</h3>
                <div class="image-wrapper">
                    <img id="thresholdImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🔳</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('threshold')" disabled>Download</button>
                <div class="effect-info">Clean binary threshold for stark dungeon aesthetics</div>
            </div>
            
            <div class="image-container">
                <h3>Atmospheric Depths</h3>
                <div class="image-wrapper">
                    <img id="atmosphericImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🌫️</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('atmospheric')" disabled>Download</button>
                <div class="effect-info">Tonal compression with atmospheric blur</div>
            </div>
            
            <div class="image-container">
                <h3>Silhouette</h3>
                <div class="image-wrapper">
                    <img id="silhouetteImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">👤</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('silhouette')" disabled>Download</button>
                <div class="effect-info">Stark silhouettes against light backgrounds</div>
            </div>
            
            <div class="image-container">
                <h3>Ghostly Apparition</h3>
                <div class="image-wrapper">
                    <img id="ghostlyImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">👻</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('ghostly')" disabled>Download</button>
                <div class="effect-info">Ethereal blur with lifted shadows</div>
            </div>
            
            <div class="image-container">
                <h3>Cavern Deep</h3>
                <div class="image-wrapper">
                    <img id="cavernDeepImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🕳️</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('cavernDeep')" disabled>Download</button>
                <div class="effect-info">Deep underground tunnel atmospheres</div>
            </div>
            
            <div class="image-container">
                <h3>Frozen Wastes</h3>
                <div class="image-wrapper">
                    <img id="frozenWastesImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">❄️</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('frozenWastes')" disabled>Download</button>
                <div class="effect-info">Crystalline winter synth processing</div>
            </div>
            
            <div class="image-container">
                <h3>Dark Ritual</h3>
                <div class="image-wrapper">
                    <img id="darkRitualImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🔮</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('darkRitual')" disabled>Download</button>
                <div class="effect-info">Heavy grain with dramatic shadows</div>
            </div>
            
            <!-- NEW RESEARCH-BASED PRESETS -->
            <div class="image-container">
                <h3>Lithographic Codex</h3>
                <div class="image-wrapper">
                    <img id="lithographicImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🖨️</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('lithographic')" disabled>Download</button>
                <div class="effect-info">Historical printmaking with engraving effects</div>
            </div>
            
            <div class="image-container">
                <h3>Sepia Nostalgia</h3>
                <div class="image-wrapper">
                    <img id="sepiaNostalgiaImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">📸</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('sepiaNostalgia')" disabled>Download</button>
                <div class="effect-info">Vintage film degradation with warm tones</div>
            </div>
            
            <div class="image-container">
                <h3>Comfy Hearth</h3>
                <div class="image-wrapper">
                    <img id="comfyHearthImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🏠</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('comfyHearth')" disabled>Download</button>
                <div class="effect-info">Warm domestic atmosphere with earth tones</div>
            </div>
            
            <div class="image-container">
                <h3>Forest Mystic</h3>
                <div class="image-wrapper">
                    <img id="forestMysticImage" class="preview-image" style="display: none;">
                    <div class="processing-placeholder">
                        <div class="placeholder-icon">🌲</div>
                        <p>Processing preview will appear here</p>
                    </div>
                </div>
                <button class="download-btn" onclick="downloadProcessed('forestMystic')" disabled>Download</button>
                <div class="effect-info">Organic textures with deep green saturation</div>
            </div>
        </div>
        
        <div id="processingStatus" class="processing-status" style="display: none;">
            <div class="spinner"></div>
            <p>Processing image...</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>